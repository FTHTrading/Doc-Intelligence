# ğŸŸ£ Secure Document Control (SDC)

## Overview

The SDC layer controls how documents are viewed, distributed, and protected after processing. No document leaves the system without forensic tracking.

## Modules

| Module | File | Purpose |
|--------|------|---------|
| Secure Viewer | `sdc/secureViewer.ts` | Protected document viewing server (port 3003) |
| Watermark Engine | `sdc/watermarkEngine.ts` | Invisible forensic watermark embedding |
| Forensic Fingerprint | `sdc/forensicFingerprint.ts` | Per-recipient document fingerprinting |
| Access Token Service | `sdc/accessTokenService.ts` | Time-limited, single-use access tokens |
| Export Policy Engine | `sdc/exportPolicyEngine.ts` | Per-document export restrictions |
| Access Ledger | `sdc/accessLedger.ts` | Hash-chained access event log |
| Document Intake | `sdc/documentIntakeEngine.ts` | Controlled document intake flow |

## Secure Viewer

The viewer runs on port 3003 (internal only â€” accessed via Cloudflare Tunnel at `viewer.fthtrading.com`).

### View Protection

| Control | Description |
|---------|-------------|
| Forensic watermark | Invisible per-recipient watermark embedded in document |
| Copy prevention | Clipboard operations disabled |
| Right-click disabled | Context menu suppressed |
| Screenshot deterrence | CSS overlay protection |
| Print restriction | Print dialog intercepted |
| Export policy | Per-document download rules |

### Access Flow

```
Request â†’ Cloudflare Zero Trust â†’ OTP â†’ Access Token Validation â†’ SDC Viewer
                                                                      â”‚
                                                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                                          â”‚  Watermark Applied    â”‚
                                                          â”‚  Fingerprint Embedded â”‚
                                                          â”‚  Access Logged        â”‚
                                                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Access Tokens

- Generated by `accessTokenService.ts`
- Time-limited (configurable expiry)
- Single-use (consumed on first successful access)
- Bound to recipient identity
- Non-transferable

## Export Policy

Per-document export rules:

| Policy | Effect |
|--------|--------|
| `NO_EXPORT` | Document cannot be downloaded |
| `VIEW_ONLY` | View in browser only |
| `CONTROLLED_EXPORT` | Download with watermark + fingerprint |
| `FULL_EXPORT` | Unrestricted download (rare) |

## Access Ledger

Every view event is recorded:

```json
{
  "sequence": 1,
  "timestamp": "2026-02-24T14:30:00.000Z",
  "event": "SDC_VIEW_GRANTED",
  "recipientId": "investor@example.com",
  "documentId": "DOC-2026-001",
  "accessTokenUsed": "tok_abc123",
  "deviceFingerprint": "fp_xyz",
  "previousHash": "0000000000000000",
  "hash": "a3f8c1d2..."
}
```

Hash-chained â€” any tampering is detectable.

---

**From The Hart** Â· [fthtrading.com](https://fthtrading.com)
